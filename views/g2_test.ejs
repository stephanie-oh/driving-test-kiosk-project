<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('layouts/header'); -%>
</head>
<body>
    <div class="header">
        <h1>G2 Test</h1>
    </div>
    <%- include('layouts/dashnav'); -%>
    <main class="main">
        <h2>G2 Test</h2>
        <p>Enter your details below to register</p>
        <div class="form_con">
            <form action="" method="post">
                <fieldset>
                    <legend>Personal Information</legend>
                    <label for="name">First Name</label>
                    <input type="text" id="fname"><br><br>
                    <label for="name">Last Name</label>
                    <input type="text" id="lname"><br><br>
                    <label for="age">Age</label>
                    <input type="number" id="age"><br><br>
                    <label for="date">Date of Birth</label>
                    <input type="date" id="dob"><br><br>
                    <label for="lnumber">License Number</label>
                    <input type="text" id="lnum">
                </fieldset>
                <fieldset>
                    <legend>Car Information</legend>
                    <label for="name">Make</label>
                    <input type="text" id="cname"><br><br>
                    <label for="name">Model</label>
                    <input type="text" id="mname"><br><br>
                    <label for="age">Year</label>
                    <input type="number" id="year"><br><br>
                    <label for="pnumber">Plate Number</label>
                    <input type="text" id="pnum">
                </fieldset>
                <input type="button" id="submit" value="Submit" onclick="submitForm()">
            </form> 
        </div>
    </main>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script>
         $(document).ready(function () {
            $("#submit").click(function () {
                // Collect data from input fields
                var fname = $("#fname").val();
                var lname = $("#lname").val();
                var lnum = $("#lnum").val();
                var age = $("#age").val();
                var cname = $("#cname").val();
                var mname = $("#mname").val();
                var year = $("#year").val();
                var pnum = $("#pnum").val();

                // Create data object in JSON format
                var driverData = {
                    fname: fname,
                    lname: lname,
                    lnum: lnum,
                    age: age,
                    cname: cname,
                    mname: mname,
                    year: year,
                    pnum: pnum
                };

                // Send data to the server using AJAX in JSON format
                $.ajax({
                    type: "POST",
                    url: "/g2_test/submit", // Replace with your server endpoint
                    contentType: "application/json",
                    data: JSON.stringify(driverData),
                    success: function (response) {
                        console.log("Data sent successfully:", response);
                        // Display a pop-up or handle success, if needed
                        alert('Details sent');
                    },
                    error: function (error) {
                        console.error("Error sending data:", error);
                        // Handle error, if needed
                    }
                });
            });
        });
    </script>
</body>
</html>